# 选择自定义控件类型

Avalonia提供了多种方法来创建自定义控件以满足应用程序的特定需求。了解不同类型的自定义控件将帮助您选择最合适的方法来满足您的需求。在Avalonia中，常见的自定义控件类型有用户控件（`UserControl`）、模板控件（`TemplatedControl`）和自绘控件。

## 用户控件（UserControl）

用户控件是在Avalonia中创建自定义控件的一种高级方法。它允许您通过组合现有控件并使用XAML定义布局来构建一个控件。用户控件充当一个容器，封装了多个控件，并提供了一个连贯的用户界面。

:::info
通常，用户控件用于表示应用程序中的专用视图，比如“用户详细信息视图”，而不是用作通用的用户界面元素。
:::

创建用户控件需要以下步骤：

1. **定义XAML**：创建一个新的`UserControl` XAML文件，通过放置控件、设置属性和应用样式来定义控件的布局和外观。

2. **Code-behind**：可选项，您可以定义额外的代码后台逻辑来处理事件、修改行为或为用户控件提供额外的功能。

3. **重用和定制**: 用户控件可以在应用程序中轻松重用和定制。当您希望封装一组特定的控件和行为为可重用的组件或"视图"时，它们特别有用。

:::info
要了解这些概念的完整、可运行的示例，请查看[示例应用程序](https://github.com/AvaloniaUI/AvaloniaUI.QuickGuides/tree/main/CustomControl).
:::

## 模板控件（Templated/Lookless Controls）

模板控件（也称为“Lookless控件”）为在Avalonia中创建自定义控件提供了更高级和可自定义的方法。模板控件将控件的行为和逻辑与其可视外观分离，允许应用程序开发人员通过控件模板进行样式化和模板化。

对于模板控件，您在code-behind类中定义控件的行为和属性，而视觉外观则通过在XAML中定义控件模板来指定。这种分离允许应用程序开发人员自定义控件的外观和给人的感觉，而不会修改其底层行为。

:::info
模板控件通常用于通用的用户界面元素，不特定于业务逻辑，可能需要不同的主题或视觉样式。Avalonia提供的大多数[内置控件](../builtin-controls.md)都是模板控件。
:::

创建模板控件需要以下步骤：

1. **定义控件类**：创建一个新的类，该类派生自`TemplatedControl`。这个类定义了控件的行为、属性和事件。

2. **控件模板**：在XAML中创建一个[`ControlTheme`](control-themes)，指定控件的视觉外观和结构。控件模板定义了控件的部分以及它们应该如何被样式化。

3. **样式和模板化**：应用程序开发人员可以通过修改控件模板或应用样式来自定义控件的外观。这样可以实现应用程序中统一和统一的视觉设计。

模板控件提供了更大的灵活性和可重用性，使它们非常适合您希望提供一个可以根据不同视觉主题进行样式化或适应各种用户偏好的控件的场景。

## 自绘控件

自绘控件在Avalonia中提供了最高级别的定制。使用自绘控件，您可以完全控制控件的视觉元素的渲染，从而创建独特而复杂的视觉外观。

:::info
自绘控件通常用于表示大部分非交互式的图形元素，不需要进行主题化。
:::

要创建自绘控件，您需要重写控件的`Render`方法，并使用低级别的绘制API（例如`DrawingContext`）来定义控件的外观。这种方法可以对控件的每个像素进行精细控制，实现高度个性化的可视化。

创建自绘控件的步骤如下：

1. **定义控件类**：创建一个新的类，该类派生自`Control`。这个类将定义控件的行为和渲染逻辑。

2. **重写Render方法**：在控件类中重写`Render`方法，并使用`DrawingContext`来绘制控件的内容。
